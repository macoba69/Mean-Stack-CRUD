!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("lodash.clonedeep"),require("@angular/core"),require("@angular/forms"),require("tslib"),require("@angular/cdk/collections"),require("rxjs")):"function"==typeof define&&define.amd?define("angular6-material-table",["exports","lodash.clonedeep","@angular/core","@angular/forms","tslib","@angular/cdk/collections","rxjs"],e):e(t["angular6-material-table"]={},null,t.ng.core,t.ng.forms,t.tslib,t.ng.cdk.collections,null)}(this,function(t,e,r,i,o,n,a){"use strict";e=e&&e.hasOwnProperty("default")?e["default"]:e;var s=function(){function t(t){Object.assign(this,t),this.fillValidatorFromData(),this.validator&&(this.editing?this.validator.enable():this.validator.disable())}return Object.defineProperty(t.prototype,"currentData",{get:function(){return this.validator?Object.assign(this._currentData,this.validator.getRawValue()):this._currentData},set:function(t){this._currentData=t,this.fillValidatorFromData()},enumerable:!0,configurable:!0}),t.prototype.fillValidatorFromData=function(){if(this.validator){var t={};for(var e in this.validator.controls)t[e]=this._currentData[e];this.validator.setValue(t)}},t.prototype["delete"]=function(){this.source["delete"](this.id)},t.prototype.confirmEditCreate=function(){return this.originalData=undefined,-1==this.id?this.source.confirmCreate(this):this.source.confirmEdit(this)},t.prototype.startEdit=function(){this.originalData=e(this.currentData),this.editing=!0,this.validator.enable()},t.prototype.cancelOrDelete=function(){-1!=this.id&&this.editing?(this.currentData=this.originalData,this.editing=!1,this.validator.disable()):this["delete"]()},t}(),u=function(){function t(){}return t.prototype.getRowValidator=function(){return new i.FormGroup({})},t.decorators=[{type:r.Injectable}],t}(),c=function(n){function t(t,e,r,i){void 0===i&&(i={prependNewElements:!1});var o=n.call(this)||this;if(o.validatorService=r,o.config=i,r||(o.validatorService=new u),e)o.dataConstructor=e;else{if(!(t&&0<t.length))throw new Error("You must define either a non empty array, or an associated class to build the table.");o.dataKeys=Object.keys(t[0])}return o.rowsSubject=new a.BehaviorSubject(o.getRowsFromData(t)),o.datasourceSubject=new a.Subject,o}return o.__extends(t,n),t.prototype.createNew=function(){var t=this.rowsSubject.getValue();if(!this.existsNewElement(t)){var e=new s({id:-1,editing:!0,currentData:this.createNewObject(),source:this,validator:this.validatorService.getRowValidator()});this.config.prependNewElements?this.rowsSubject.next([e].concat(t)):(t.push(e),this.rowsSubject.next(t))}},t.prototype.confirmCreate=function(t){if(!t.validator.valid)return!1;var e=this.rowsSubject.getValue();return t.id=e.length-1,this.rowsSubject.next(e),t.editing=!1,t.validator.disable(),this.updateDatasourceFromRows(e),!0},t.prototype.confirmEdit=function(t){if(!t.validator.valid)return!1;var e=this.rowsSubject.getValue();return e[this.getIndexFromRowId(t.id,e)]=t,this.rowsSubject.next(e),t.editing=!1,t.validator.disable(),this.updateDatasourceFromRows(e),!0},t.prototype["delete"]=function(t){var e=this.rowsSubject.getValue(),r=this.getIndexFromRowId(t,e);e.splice(r,1),this.updateRowIds(r,e),this.rowsSubject.next(e),-1!=t&&this.updateDatasourceFromRows(e)},t.prototype.getRow=function(t){var e=this.rowsSubject.getValue(),r=this.getIndexFromRowId(t,e);return 0<=r&&r<e.length?e[r]:null},t.prototype.updateDatasource=function(t,e){void 0===e&&(e={emitEvent:!0}),this.currentData!==t&&(this.currentData=t,this.rowsSubject.next(this.getRowsFromData(t)),e.emitEvent&&this.datasourceSubject.next(t))},t.prototype.existsNewElement=function(t){return!(0==t.length||-1<t[this.getNewRowIndex(t)].id)},t.prototype.getNewRowIndex=function(t){return this.config.prependNewElements?0:t.length-1},t.prototype.getRowIdFromIndex=function(t,e){return this.config.prependNewElements?e-1-t:t},t.prototype.getIndexFromRowId=function(t,e){return-1==t?this.existsNewElement(e)?this.getNewRowIndex(e):-1:this.config.prependNewElements?e.length-1-t:t},t.prototype.updateRowIds=function(t,e){for(var r=this.config.prependNewElements?-1:1,i=t;i<e.length&&0<=i;i+=r)-1!=e[i].id&&(e[i].id=this.getRowIdFromIndex(i,e.length))},t.prototype.getDataFromRows=function(t){return t.filter(function(t){return-1!=t.id}).map(function(t){return t.originalData?t.originalData:t.currentData})},t.prototype.updateDatasourceFromRows=function(t){this.currentData=this.getDataFromRows(t),this.datasourceSubject.next(this.currentData)},t.prototype.getRowsFromData=function(r){var i=this;return r.map(function(t,e){return new s({id:i.getRowIdFromIndex(e,r.length),editing:!1,currentData:t,source:i,validator:i.validatorService.getRowValidator()})})},t.prototype.createNewObject=function(){return this.dataConstructor?new this.dataConstructor:this.dataKeys.reduce(function(t,e){return t[e]=undefined,t},{})},t.prototype.connect=function(){return this.rowsSubject.asObservable()},t.prototype.disconnect=function(){},t}(n.DataSource),d=function(){function t(){}return t.decorators=[{type:r.Injectable}],t}();t.TableDataSource=c,t.DefaultValidatorService=u,t.TableElement=s,t.ValidatorService=d,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=angular6-material-table.umd.min.js.map